{% extends 'base.html' %}
{% block title %}Adnipo - Novo Membro{% endblock %}

{% block content %}

<div class="container my-5">
  <h2 class="mb-4">Adnipo - Cadastro de Membro</h2>

  <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate autocomplete="off">

    <!-- Dados Pessoais -->
    <div class="card shadow-sm border-0 mb-4">
      <div class="card-header bg-adnipo text-white">
        <h5 class="mb-0">Dados Pessoais</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" name="nome" class="form-control" id="nome" placeholder="Digite seu nome completo" required autocomplete="off">
              <label for="nome">Nome <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe seu nome.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="email" name="email" class="form-control" id="email" placeholder="email@exemplo.com" required autocomplete="off">
              <label for="email">E-mail <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe um e-mail válido.</div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-floating">
              <input type="text" name="cep" class="form-control cep" id="cep" placeholder="00000-000" autocomplete="off">
              <label for="cep">CEP</label>
            </div>
          </div>
          <div class="col-md-8">
            <div class="form-floating">
              <input type="text" name="endereco" class="form-control" id="endereco" placeholder="Rua, Avenida, etc." required autocomplete="off">
              <label for="endereco">Endereço <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe o endereço.</div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-floating">
              <input type="text" name="numero" class="form-control" id="numero" placeholder="Número" autocomplete="off">
              <label for="numero">Número</label>
            </div>
          </div>
          <div class="col-md-5">
            <div class="form-floating">
              <input type="text" name="cidade" class="form-control" id="cidade" placeholder="Cidade" required autocomplete="off">
              <label for="cidade">Cidade <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe a cidade.</div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-floating">
              <input type="text" name="uf" class="form-control" id="uf" placeholder="UF" required autocomplete="off" maxlength="2">
              <label for="uf">UF <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe o estado (UF).</div>
            </div>
          </div>
          <div class="col-md-5">
            <div class="form-floating">
              <input type="text" name="pais" class="form-control" id="pais" placeholder="País" required autocomplete="off" value="Brasil">
              <label for="pais">País <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe o país.</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-floating">
              <input type="tel" name="telefone" class="form-control celular" id="telefone" placeholder="(00) 00000-0000" required autocomplete="off">
              <label for="telefone">Telefone <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe um telefone válido.</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-floating">
              <input type="date" name="data_nascimento" class="form-control" id="data_nascimento" placeholder="Data de nascimento" required autocomplete="off">
              <label for="data_nascimento">Data de Nascimento <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, informe a data de nascimento.</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-floating">
              <input type="text" name="naturalidade" class="form-control" id="naturalidade" placeholder="Naturalidade" autocomplete="off">
              <label for="naturalidade">Naturalidade</label>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-floating">
              <select name="sexo" class="form-select" id="sexo" required autocomplete="off">
                <option value="" disabled selected>Selecione</option>
                <option value="Masculino">Masculino</option>
                <option value="Feminino">Feminino</option>
                <option value="Outro">Outro</option>
              </select>
              <label for="sexo">Sexo <span class="text-danger">*</span></label>
              <div class="invalid-feedback">Por favor, selecione o sexo.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Dados Complementares (opcionais) -->
    <div class="card shadow-sm border-0 mb-4">
      <div class="card-header bg-adnipo text-white">
        <h5 class="mb-0">Dados Complementares (Opcional)</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <div class="form-floating">
              <select name="estado_civil" class="form-select" id="estado_civil" autocomplete="off">
                <option value="" selected disabled>Selecione</option>
                <option value="Solteiro">Solteiro</option>
                <option value="Casado">Casado</option>
                <option value="Viúvo">Viúvo</option>
                <option value="Divorciado">Divorciado</option>
              </select>
              <label for="estado_civil">Estado Civil</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" name="nome_conjuge" class="form-control" id="nome_conjuge" placeholder="Nome do Cônjuge" autocomplete="off">
              <label for="nome_conjuge">Nome do Cônjuge</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-floating">
              <input type="date" name="data_casamento" class="form-control" id="data_casamento" placeholder="Data de Casamento" autocomplete="off">
              <label for="data_casamento">Data de Casamento</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-floating">
              <input type="text" name="escolaridade" class="form-control" id="escolaridade" placeholder="Escolaridade" autocomplete="off">
              <label for="escolaridade">Escolaridade</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-floating">
              <input type="text" name="profissao" class="form-control" id="profissao" placeholder="Profissão" autocomplete="off">
              <label for="profissao">Profissão</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" name="nome_pai" class="form-control" id="nome_pai" placeholder="Nome do Pai" autocomplete="off">
              <label for="nome_pai">Nome do Pai</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" name="nome_mae" class="form-control" id="nome_mae" placeholder="Nome da Mãe" autocomplete="off">
              <label for="nome_mae">Nome da Mãe</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Dados Eclesiásticos (opcional) -->
    <div class="card shadow-sm border-0 mb-4">
      <div class="card-header bg-adnipo text-white">
        <h5 class="mb-0">Dados Eclesiásticos</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <div class="form-floating">
              <select name="membro_tipo" class="form-select" id="membro_tipo" autocomplete="off">
                <option value="" selected disabled>Selecione</option>
                <option value="Membro">Membro</option>
                <option value="Visitante">Visitante</option>
                <option value="Não Membro">Não Membro</option>
              </select>
              <label for="membro_tipo">Tipo de Membro</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <select name="oficio" class="form-select" id="oficio" autocomplete="off">
                <option value="" selected disabled>Selecione</option>
                <option value="Sem ofício">Sem ofício</option>
                <option value="Cooperador">Cooperador</option>
                <option value="Louvor">Louvor</option>
                <option value="Oficial Obreiro">Líderes</option>
                <option value="Diaconato">Diaconato</option>
                <option value="Presbiterio">Presbiterio</option>
                <option value="Pastoreio">Pastoreio</option>
              </select>
              <label for="oficio">Ofício</label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Batismo (opcional) -->
    <div class="card shadow-sm border-0 mb-4">
      <div class="card-header bg-adnipo text-white">
        <h5 class="mb-0">Batismo</h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-4">
            <div class="form-floating">
              <input type="date" name="data_batismo" class="form-control" id="data_batismo" autocomplete="off">
              <label for="data_batismo">Data do Batismo</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-floating">
              <input type="text" name="pastor_batismo" class="form-control" id="pastor_batismo" placeholder="Nome do Pastor" autocomplete="off">
              <label for="pastor_batismo">Pastor do Batismo</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-floating">
              <input type="text" name="igreja_batismo" class="form-control" id="igreja_batismo" placeholder="Nome da Igreja" autocomplete="off">
              <label for="igreja_batismo">Igreja do Batismo</label>
            </div>
          </div>
          <div class="col-md-12">
            <label for="foto" class="form-label">Foto (opcional)</label>
            <input type="file" class="form-control" id="foto" name="foto" autocomplete="off">
          </div>
        </div>
      </div>
    </div>

    <!-- Aviso sobre o primeiro acesso -->
    <div class="alert alert-info mt-4" role="alert">
      <strong>Atenção:</strong> Ao se cadastrar, utilize o <strong>e-mail informado acima</strong> e a senha padrão <strong>"adnipo"</strong> para realizar o primeiro acesso ao sistema. Depois, você poderá alterar sua senha no painel.
    </div>

    <!-- Consentimento para compartilhamento de dados -->
    <div class="form-check mt-3">
      <input class="form-check-input" type="checkbox" value="" id="compartilharDados" required>
      <label class="form-check-label" for="compartilharDados">
        Concordo em compartilhar meus dados para fins de cadastro e atividades internas da Adnipo.
      </label>
      <div class="invalid-feedback">
        Você precisa aceitar para prosseguir.
      </div>
    </div>

    <!-- Botões -->
    <div class="text-end mt-4">
      <button type="submit" class="btn btn-success px-4">
        <i class="bi bi-check-circle"></i> Cadastrar
      </button>
      <a href="{{ url_for('listar_membros') }}" class="btn btn-outline-secondary ms-2">
        <i class="bi bi-arrow-left-circle"></i> Voltar
      </a>
    </div>

  </form>
</div>

<!-- Validação Bootstrap -->
<script>
  (() => {
    'use strict'
    const forms = document.querySelectorAll('.needs-validation')
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>

{% endblock %}
